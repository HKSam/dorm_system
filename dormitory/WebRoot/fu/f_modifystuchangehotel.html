<div class="right_top btm">
  <div class="rheader"><span class="pageName"><b>调整学生住宿调配</b></span><span class="shuoming">您可以修改学生住宿调配情况</span></div>
</div>
<div class="right_contain">
       <div class="editor" style="float:left;margin-top:10px">
            <p><img src="images/list.png" />请上传您调整后的寝室调配情况:</p>
            <form name="form1" enctype="multipart/form-data" method="post"  action="hello.html">
                 <input name="file" type="file" size="35" onchange="fileChange(this);"/ >
                 <input name="submit" type="submit" class="btn_grey" value="提交">
	        </form>
      </div>
      <div class="result" style="float:left;margin-top:10px;">
          <p><img src="images/list.png" />查看管理员审批意见：</p>
          <div class="table_two" style="float:left;margin-top:10px"></div>
      </div>
</div>
<script type="text/javascript">
       $.getJSON( 'json/get/s_diaohuanyijian_xinxi.json',function(data){
		   $('.table_two').datagrid(
			{
				width : '750px',
				height : '330px',
				nowrap : false,
				data: data,
				columns : [ [
						{field : 'ck',align : 'center',checkbox : true},
						{field : 'teaNum',title : '教师号',width : 100,align : 'center'},
						{field : 'teaname',title : '姓名',width : 100,align : 'center'},
						{field : 'mgrade',title : '年级',width : 100,align : 'center'},
						{field : 'college',title : '学院',width : 200,align : 'center'},
						{field : 'shenhe',title : '审核',width : 100,align : 'center'}
						 ] ],
				pagination : true,
				pageNumber : 1,
				pageSize : 2,
				pageList : [ 1, 2, 3 ]
			});
			var pager = $('.table_two').datagrid().datagrid('getPager');// get the pager of datagrid
			pager.pagination({
				beforePageText : "第",
				afterPageText : "共{pages}页",
				displayMsg : "显示{from}到{to},共{total}条记录"
			});
	   });
	   var isIE = /msie/i.test(navigator.userAgent) && !window.opera; 
	   function fileChange(target,id) { 
			var fileSize = 0; 
			var filetypes =[".xls",".xlsx"]; 
			var filepath = target.value; 
			var filemaxsize = 1024*2;//2M 
			if(filepath){ 
			var isnext = false; 
			var fileend = filepath.substring(filepath.indexOf(".")); 
			if(filetypes && filetypes.length>0){ 
				for(var i =0; i<filetypes.length;i++){ 
					if(filetypes[i]==fileend){ 
						isnext = true; 
						break; 
					} 
				} 
			} 
			if(!isnext){ 
				$.messager.alert("提示","不接受此文件类型！"); 
				target.value =""; 
				return false; 
			} 
			}else{ 
				return false; 
			} 
			if (isIE && !target.files) { 
				var filePath = target.value; 
				var fileSystem = new ActiveXObject("Scripting.FileSystemObject"); 
				if(!fileSystem.FileExists(filePath)){ 
					$.messager.alert("提示","文件不存在，请重新输入！"); 
					return false; 
				} 
				var file = fileSystem.GetFile (filePath); 
				fileSize = file.Size; 
			} else { 
				fileSize = target.files[0].size; 
			} 
			
			var size = fileSize / 1024; 
			if(size>filemaxsize){ 
				$.messager.alert("提示","文件大小不能大于"+filemaxsize/1024+"M！"); 
				target.value =""; 
				return false; 
			} 
			if(size<=0){ 
				$.messager.alert("提示","文件大小不能为0M！"); 
				target.value =""; 
				return false; 
			} 
	  } 
</script>
