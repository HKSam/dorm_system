<script type="text/javascript" src="js/s_fenpei_right.js"></script>
<div class="right_top">
  <div class="rheader"> <span class="pageName"><b>寝室调换</b></span> <span class="shuoming">您可以对学生进行批量一键调换</span> </div>
  <ul class="right_ul right_ul_diaohuan">
    <li><a href="#" class="editornav" >系统自动调换</a></li>
    <li><a href="#">选择楼栋</a></li>
    <li><a href="#">查看调换情况</a></li>
    <li><a href="#">学院意见</a></li>
  </ul>
</div>
<div class="right_contain">
  <div class="stu_xuanze">
    <p class="diaohuan_txt">请选择要调换的人员：</p>
    <div class="jilian"> 性别:
      <select class="four_select">
        <option>请选择性别</option>
        <option value="男">男</option>
        <option value="女">女</option>
      </select>
    </div>
    <input type="button" name="botton" value="确定" class="jilian_sure" />
  </div>
  <div class="table_one"></div>
  <div class="fenpei_txt"> 本次分配已选<span class='option_sum'>0</span>人
    <input type='button'
            name='nextStep' value='下一步' class='nextStep' />
  </div>
</div>
<!--级联--> 
<script type="text/javascript">
	//$("#a").cascade();//可以直接调用实现级联
	//也可以传参覆盖
	$(".jilian").cascade_four({
		url : "json/get/s_newstufp_jilian.json",
		firstName : "所属学院",
		secondName : "学历",
		thirdName : "就读专业",
		fourName : "所在班级",
		firstText : "请选择学院",
		secondText : "请选择学历",
		thirdText : "请选择专业",
		fourText : "请选择班级"
	});
</script> 
<!--选择分配的学生名单--> 
<script type="text/javascript">
	$(".fenpei_txt").hide();
	$(".jilian_sure").click(function() {
		var college = $("#first_select").val();
		var major = $("#second_select").val();
		var classes = $("#third_select").val();
		var sex = $(".stu_xuanze .jilian_sex .four_select").val();
		var xueli = $("#four_select").val();
		stuSex = sex;
		$.getJSON('json/get/s_stufenpei.json', {
			"college" : college,
			"major" : major,
			"classes" : classes,
			"sex" : sex
		}, function(data) {
			$(".table_one").datagrid({
				data : data,
				width : '752px',
				height : '250px',
				columns : [ [
				 {field : 'college',title : '学院',width : 130,align : 'center'}, 
				 {field : 'major',title : '专业',width : 150,align : 'center'}, 
				 {field : 'classes',title : '班级',width : 80,align : 'center'}, 
				 {field : 'stuNum',title : '学号',width : 90,align : 'center'}, 
				 {field : 'name',title : '姓名',width : 100,align : 'center'},
				 {field : 'sex',title : '性别',width : 40,align : 'center'},
				 {field : 'xueli',title : '学历',width : 80,align : 'center'},
				 {field : 'dormitory',title : '寝室号',width : 80,align : 'center'}
			    ] ],
				pagination : true
			});
			var pager = $('.table_one').datagrid().datagrid('getPager');// get the pager of datagrid
			pager.pagination({
				beforePageText : "第",
				afterPageText : "共{pages}页",
				displayMsg : "显示{from}到{to},共{total}条记录"
			});
			sum_diaohuan = data.total;//选择的人数总量
			openSum();
		});

	});
	function openSum() {
		$(".option_sum").html(sum_diaohuan);
		$(".fenpei_txt").show();
	}
	$(".nextStep").click(function() {
		if (sum_diaohuan > 0) {
			$("#base_right .right_contain").empty().load("super/s_atuo_qsxuanze.html");
			$(".editornav").removeAttr("class").parent().next().find("a").addClass("editornav");
		} else
			$.messager.alert("提示","选择分配的人数为0，无法分配寝室，请重新选择要分配的人员！","info");
	});
</script>